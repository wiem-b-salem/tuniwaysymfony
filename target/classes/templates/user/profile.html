<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>My Profile - TuniWay</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<section class="profile-page">
    <div class="container">
        <h1>My Profile</h1>

        <!-- Success/Error Messages -->
        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

        <!-- Profile Info -->
        <div class="profile-card">
            <img th:src="${user.profilePicture}" alt="Profile Picture" class="profile-avatar">
            <h2 th:text="${user.username}">Username</h2>
            <p th:text="${user.email}">Email</p>
            <span th:text="${user.role}">Role</span>
        </div>

        <!-- Update Form -->
        <div class="profile-form">
            <h3>Update Profile</h3>
            <form action="/user/profile/update" method="post">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" name="username" th:value="${user.username}" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" th:value="${user.email}" required>
                </div>
                <div class="form-group">
                    <label>Profile Picture URL</label>
                    <input type="text" name="profilePicture" th:value="${user.profilePicture}">
                </div>
                <button type="submit" class="btn-primary">Save Changes</button>
            </form>
        </div>

        <!-- Reservations -->
        <div class="reservations-section">
            <h3>My Reservations</h3>
            <table>
                <thead>
                <tr>
                    <th>Place/Tour</th>
                    <th>Date</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="reservation : ${reservations}">
                    <td th:text="${reservation.place?.name}">Place</td>
                    <td th:text="${reservation.dateReservation}">Date</td>
                    <td th:text="${reservation.status}">Status</td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Reviews -->
        <div class="reviews-section">
            <h3>My Reviews</h3>
            <div th:each="review : ${reviews}" class="review-card">
                <h4 th:text="${review.place?.name}">Place</h4>
                <p th:text="${review.comment}">Comment</p>
                <span th:text="${review.rating} + '/5'">Rating</span>
            </div>
        </div>
    </div>
</section>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>